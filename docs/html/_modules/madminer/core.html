
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>madminer.core &#8212; MadMiner 0.1.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for madminer.core</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span>
<span class="kn">import</span> <span class="nn">six</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">tempfile</span>

<span class="kn">from</span> <span class="nn">madminer.morphing</span> <span class="k">import</span> <span class="n">Morpher</span>
<span class="kn">from</span> <span class="nn">madminer.utils.interfaces.hdf5</span> <span class="k">import</span> <span class="n">save_madminer_settings</span><span class="p">,</span> <span class="n">load_madminer_settings</span>
<span class="kn">from</span> <span class="nn">madminer.utils.interfaces.mg_cards</span> <span class="k">import</span> <span class="n">export_param_card</span><span class="p">,</span> <span class="n">export_reweight_card</span>
<span class="kn">from</span> <span class="nn">madminer.utils.interfaces.mg</span> <span class="k">import</span> <span class="n">generate_mg_process</span><span class="p">,</span> <span class="n">prepare_run_mg_pythia</span><span class="p">,</span> <span class="n">run_mg_pythia</span><span class="p">,</span> <span class="n">copy_ufo_model</span>
<span class="kn">from</span> <span class="nn">madminer.utils.various</span> <span class="k">import</span> <span class="n">create_missing_folders</span><span class="p">,</span> <span class="n">general_init</span><span class="p">,</span> <span class="n">format_benchmark</span><span class="p">,</span> <span class="n">make_file_executable</span>
<span class="kn">from</span> <span class="nn">madminer.utils.various</span> <span class="k">import</span> <span class="n">copy_file</span>


<div class="viewcode-block" id="MadMiner"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner">[docs]</a><span class="k">class</span> <span class="nc">MadMiner</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The central class to manage parameter spaces, benchmarks, and the generation of events through MadGraph and</span>
<span class="sd">    Pythia.</span>
<span class="sd">    </span>
<span class="sd">    An instance of this class is the starting point of most MadMiner applications. It is typically used in four steps:</span>

<span class="sd">    * Defining the parameter space through `MadMiner.add_parameter`</span>
<span class="sd">    * Defining the benchmarks, i.e. the points at which the squared matrix elements will be evaluated in MadGraph, with</span>
<span class="sd">      `MadMiner.add_benchmark()` or, if operator morphing is used, with `MadMiner.set_benchmarks_from_morphing()`</span>
<span class="sd">    * Saving this setup with `MadMiner.save()` (it can be loaded in a new instance with `MadMiner.load()`)</span>
<span class="sd">    * Running MadGraph and Pythia with the appropriate settings with `MadMiner.run()` or `MadMiner.run_multiple()` (the</span>
<span class="sd">      latter allows the user to combine runs from multiple run cards and sampling points)</span>
<span class="sd">    </span>
<span class="sd">    Please see the tutorial for a hands-on introduction to its methods.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    debug : bool, optional</span>
<span class="sd">        If True, additional detailed debugging output is printed. Default value: False.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">general_init</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_benchmark</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_morphing</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="MadMiner.add_parameter"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner.add_parameter">[docs]</a>    <span class="k">def</span> <span class="nf">add_parameter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">lha_block</span><span class="p">,</span>
        <span class="n">lha_id</span><span class="p">,</span>
        <span class="n">parameter_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">param_card_transform</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">morphing_max_power</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">parameter_range</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an individual parameter.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        lha_block :  str</span>
<span class="sd">            The name of the LHA block as used in the param_card. Case-sensitive.</span>

<span class="sd">        lha_id : int</span>
<span class="sd">            The LHA id as used in the param_card.</span>

<span class="sd">        parameter_name : str or None</span>
<span class="sd">            An internal name for the parameter. If None, a the default &#39;benchmark_i&#39; is used.</span>

<span class="sd">        morphing_max_power : int or tuple of int</span>
<span class="sd">            The maximal power with which this parameter contributes to the</span>
<span class="sd">            squared matrix element of the process of interest. If a tuple is given, gives this</span>
<span class="sd">            maximal power for each of several operator configurations. Typically at tree level,</span>
<span class="sd">            this maximal number is 2 for parameters that affect one vertex (e.g. only production</span>
<span class="sd">            or only decay of a particle), and 4 for parameters that affect two vertices (e.g.</span>
<span class="sd">            production and decay). Default value: 2.</span>

<span class="sd">        param_card_transform : None or str</span>
<span class="sd">            Represents a one-parameter function mapping the parameter</span>
<span class="sd">            (`&quot;theta&quot;`) to the value that should be written in the parameter cards. This</span>
<span class="sd">            str is parsed by Python&#39;s `eval()` function, and `&quot;theta&quot;` is parsed as the</span>
<span class="sd">            parameter value. Default value: None.</span>

<span class="sd">        parameter_range : tuple of float</span>
<span class="sd">            The range of parameter values of primary interest. Only affects the</span>
<span class="sd">            basis optimization. Default value: (0., 1.).</span>
<span class="sd">            </span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Default names</span>
        <span class="k">if</span> <span class="n">parameter_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s2">&quot;parameter_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">))</span>

        <span class="c1"># Check and sanitize input</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">),</span> <span class="s2">&quot;Parameter name is not a string: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lha_block</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">),</span> <span class="s2">&quot;LHA block is not a string: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lha_block</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lha_id</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="s2">&quot;LHA id is not an integer: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">lha_id</span><span class="p">)</span>

        <span class="n">parameter_name</span> <span class="o">=</span> <span class="n">parameter_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="n">parameter_name</span> <span class="o">=</span> <span class="n">parameter_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">parameter_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s2">&quot;Parameter name exists already: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">morphing_max_power</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">morphing_max_power</span> <span class="o">=</span> <span class="p">(</span><span class="n">morphing_max_power</span><span class="p">,)</span>

        <span class="c1"># Add parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="n">parameter_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">lha_block</span><span class="p">,</span> <span class="n">lha_id</span><span class="p">,</span> <span class="n">morphing_max_power</span><span class="p">,</span> <span class="n">parameter_range</span><span class="p">,</span> <span class="n">param_card_transform</span><span class="p">)</span>

        <span class="c1"># After manually adding parameters, the morphing information is not accurate anymore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Added parameter </span><span class="si">%s</span><span class="s2"> (LHA: </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">, maximal power in squared ME: </span><span class="si">%s</span><span class="s2">, range: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">parameter_name</span><span class="p">,</span>
            <span class="n">lha_block</span><span class="p">,</span>
            <span class="n">lha_id</span><span class="p">,</span>
            <span class="n">morphing_max_power</span><span class="p">,</span>
            <span class="n">parameter_range</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="MadMiner.set_parameters"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner.set_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">set_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Manually sets all parameters, overwriting previously added parameters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        parameters : dict or list or None, optional</span>
<span class="sd">             If parameters is None, resets parameters. If parameters is an dict, the keys should be str and give the</span>
<span class="sd">             parameter names, and the values are tuples of the form (LHA_block, LHA_ID, morphing_max_power, param_min,</span>
<span class="sd">             param_max) or of the form (LHA_block, LHA_ID). If parameters is a list, the items should be tuples of the</span>
<span class="sd">             form (LHA_block, LHA_ID). Default value: None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">parameters</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span>
                        <span class="n">lha_block</span><span class="o">=</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                        <span class="n">lha_id</span><span class="o">=</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                        <span class="n">parameter_name</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>
                        <span class="n">parameter_range</span><span class="o">=</span><span class="p">[</span><span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">values</span><span class="p">[</span><span class="mi">4</span><span class="p">]],</span>
                        <span class="n">morphing_max_power</span><span class="o">=</span><span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">lha_block</span><span class="o">=</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lha_id</span><span class="o">=</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">parameter_name</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Parameter properties has unexpected length: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Parameter list entry does not have length 2: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="c1"># After manually adding parameters, the morphing information is not accurate anymore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="MadMiner.add_benchmark"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner.add_benchmark">[docs]</a>    <span class="k">def</span> <span class="nf">add_benchmark</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter_values</span><span class="p">,</span> <span class="n">benchmark_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Manually adds an individual benchmark, that is, a parameter point that will be evaluated by MadGraph.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        parameter_values : dict</span>
<span class="sd">            The keys of this dict should be the parameter names and the values the corresponding parameter values.</span>

<span class="sd">        benchmark_name : str or None, optional</span>
<span class="sd">            Name of benchmark. If None, a default name is used. Default value: None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        RuntimeError</span>
<span class="sd">            If a benchmark with the same name already exists, if parameter_values is not a dict, or if a key of</span>
<span class="sd">            parameter_values does not correspond to a defined parameter.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Default names</span>
        <span class="k">if</span> <span class="n">benchmark_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">benchmark_name</span> <span class="o">=</span> <span class="s2">&quot;benchmark_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">))</span>

        <span class="c1"># Check input</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parameter_values</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Parameter values are not a dict: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter_values</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">parameter_values</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unknown parameter: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">benchmark_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Benchmark name </span><span class="si">{}</span><span class="s2"> exists already&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">benchmark_name</span><span class="p">))</span>

        <span class="c1"># Add benchmark</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">[</span><span class="n">benchmark_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameter_values</span>

        <span class="c1"># If first benchmark, this will be the default for sampling</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_benchmark</span> <span class="o">=</span> <span class="n">benchmark_name</span>

        <span class="c1"># After manually adding benchmarks, the morphing information is not accurate anymore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Added benchmark </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">benchmark_name</span><span class="p">,</span> <span class="n">format_benchmark</span><span class="p">(</span><span class="n">parameter_values</span><span class="p">))</span></div>

<div class="viewcode-block" id="MadMiner.set_benchmarks"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner.set_benchmarks">[docs]</a>    <span class="k">def</span> <span class="nf">set_benchmarks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">benchmarks</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Manually sets all benchmarks, that is, parameter points that will be evaluated by MadGraph. Calling this</span>
<span class="sd">        function overwrites all previously defined benchmarks.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        benchmarks : dict or list or None, optional</span>
<span class="sd">            Specifies all benchmarks. If None, all benchmarks are reset. If dict, the keys are the benchmark names and</span>
<span class="sd">            the values are dicts of the form {parameter_name:value}. If list, the entries are dicts</span>
<span class="sd">            {parameter_name:value} (and the benchmark names are chosen automatically). Default value: None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">benchmarks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">benchmarks</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_benchmark</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">benchmarks</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">benchmarks</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_benchmark</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">benchmarks</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_benchmark</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

        <span class="c1"># After manually adding benchmarks, the morphing information is not accurate anymore</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="MadMiner.set_benchmarks_from_morphing"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner.set_benchmarks_from_morphing">[docs]</a>    <span class="k">def</span> <span class="nf">set_benchmarks_from_morphing</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">max_overall_power</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">n_bases</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">keep_existing_benchmarks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">n_trials</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">n_test_thetas</span><span class="o">=</span><span class="mi">100</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets benchmarks, i.e. parameter points that will be evaluated by MadGraph, for a morphing algorithm, and</span>
<span class="sd">        calculates all information required for morphing. Morphing is a technique that allows MadMax to infer the full</span>
<span class="sd">        probability distribution `p(x_i | theta)` for each simulated event `x_i` and any `theta`, not just the</span>
<span class="sd">        benchmarks.</span>

<span class="sd">        The morphing basis is optimized with respect to the expected mean squared morphing weights over the parameter</span>
<span class="sd">        region of interest. If keep_existing_benchmarks=True, benchmarks defined previously will be incorporated in the</span>
<span class="sd">        morphing basis and only the remaining basis points will be optimized.</span>

<span class="sd">        Note that any subsequent call to `set_benchmarks` or `add_benchmark` will overwrite the morphing setup. The</span>
<span class="sd">        correct order is therefore to manually define benchmarks first, using `set_benchmarks` or `add_benchmark`, and</span>
<span class="sd">        then to create the morphing setup and complete the basis by calling</span>
<span class="sd">        `set_benchmarks_from_morphing(keep_existing_benchmarks=True)`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        max_overall_power : int or tuple of int, optional</span>
<span class="sd">            The maximal sum of powers of all parameters contributing to the squared matrix element. If a tuple is given,</span>
<span class="sd">            gives the maximal sum of powers for each of several operator configurations (see `add_parameter`).</span>
<span class="sd">            Typically, if parameters can affect the couplings at n vertices, this number is 2n. Default value: 4.</span>

<span class="sd">        n_bases : int, optional</span>
<span class="sd">            The number of morphing bases generated. If n_bases &gt; 1, multiple bases are combined, and the</span>
<span class="sd">            weights for each basis are reduced by a factor 1 / n_bases. Currently only the default choice of 1 is</span>
<span class="sd">            fully implemented. Do not use any other value for now. Default value: 1.</span>

<span class="sd">        keep_existing_benchmarks : bool, optional</span>
<span class="sd">            If True, the previously defined benchmarks are included in the basis. In that case, the number of free</span>
<span class="sd">            parameters in the optimization routine is reduced. If False, all benchmarks are optimized and all previously</span>
<span class="sd">            defined benchmarks forgotten. Default value: True.</span>

<span class="sd">        n_trials : int, optional</span>
<span class="sd">            Number of random basis configurations tested in the optimization procedure. A larger number will increase</span>
<span class="sd">            the run time of the optimization, but lead to better results. Default value: 100.</span>

<span class="sd">        n_test_thetas : int, optional</span>
<span class="sd">            Number of random parameter points used to evaluate the expected mean squared morphing weights. A larger</span>
<span class="sd">            number will increase the run time of the optimization, but lead to better results. Default value: 100.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Optimizing basis for morphing&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">max_overall_power</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">max_overall_power</span> <span class="o">=</span> <span class="p">(</span><span class="n">max_overall_power</span><span class="p">,)</span>

        <span class="n">morpher</span> <span class="o">=</span> <span class="n">Morpher</span><span class="p">(</span><span class="n">parameters_from_madminer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">morpher</span><span class="o">.</span><span class="n">find_components</span><span class="p">(</span><span class="n">max_overall_power</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">keep_existing_benchmarks</span><span class="p">:</span>
            <span class="n">basis</span> <span class="o">=</span> <span class="n">morpher</span><span class="o">.</span><span class="n">optimize_basis</span><span class="p">(</span>
                <span class="n">n_bases</span><span class="o">=</span><span class="n">n_bases</span><span class="p">,</span>
                <span class="n">fixed_benchmarks_from_madminer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">,</span>
                <span class="n">n_trials</span><span class="o">=</span><span class="n">n_trials</span><span class="p">,</span>
                <span class="n">n_test_thetas</span><span class="o">=</span><span class="n">n_test_thetas</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">basis</span> <span class="o">=</span> <span class="n">morpher</span><span class="o">.</span><span class="n">optimize_basis</span><span class="p">(</span>
                <span class="n">n_bases</span><span class="o">=</span><span class="n">n_bases</span><span class="p">,</span> <span class="n">fixed_benchmarks_from_madminer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">n_trials</span><span class="o">=</span><span class="n">n_trials</span><span class="p">,</span> <span class="n">n_test_thetas</span><span class="o">=</span><span class="n">n_test_thetas</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_benchmarks</span><span class="p">(</span><span class="n">basis</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span> <span class="o">=</span> <span class="n">morpher</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_morphing</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="MadMiner.load"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">disable_morphing</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads MadMiner setup from a file. All parameters, benchmarks, and morphing settings are overwritten. See `save`</span>
<span class="sd">        for more details.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename : str</span>
<span class="sd">            Path to the MadMiner file.</span>
<span class="sd">            </span>
<span class="sd">        disable_morphing : bool, optional</span>
<span class="sd">            If True, the morphing setup is not loaded from the file. Default value: False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Load data</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">,</span> <span class="n">morphing_components</span><span class="p">,</span> <span class="n">morphing_matrix</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">load_madminer_settings</span><span class="p">(</span>
            <span class="n">filename</span>
        <span class="p">)</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Found </span><span class="si">%s</span><span class="s2"> parameters:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">):</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;   </span><span class="si">%s</span><span class="s2"> (LHA: </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">, maximal power in squared ME: </span><span class="si">%s</span><span class="s2">, range: </span><span class="si">%s</span><span class="s2">)&quot;</span><span class="p">,</span>
                <span class="n">key</span><span class="p">,</span>
                <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                <span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
            <span class="p">)</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Found </span><span class="si">%s</span><span class="s2"> benchmarks:&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">):</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;   </span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">format_benchmark</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_benchmark</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_benchmark</span> <span class="o">=</span> <span class="n">key</span>

        <span class="c1"># Morphing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_morphing</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">morphing_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">morphing_components</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">disable_morphing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span> <span class="o">=</span> <span class="n">Morpher</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span><span class="o">.</span><span class="n">set_components</span><span class="p">(</span><span class="n">morphing_components</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span><span class="o">.</span><span class="n">set_basis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">,</span> <span class="n">morphing_matrix</span><span class="o">=</span><span class="n">morphing_matrix</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">export_morphing</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Found morphing setup with </span><span class="si">%s</span><span class="s2"> components&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">morphing_components</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Did not find morphing setup.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="MadMiner.save"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves MadMiner setup into a file.</span>

<span class="sd">        The file format follows the HDF5 standard. The saved information includes:</span>

<span class="sd">        * the parameter definitions,</span>
<span class="sd">        * the benchmark points, and</span>
<span class="sd">        * the morphing setup (if defined).</span>

<span class="sd">        This file is an important input to later stages in the analysis chain, including the processing of generated</span>
<span class="sd">        events, extraction of training samples, and calculation of Fisher information matrices. In these downstream</span>
<span class="sd">        tasks, additional information will be written to the MadMiner file, including the observations and event</span>
<span class="sd">        weights.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        filename : str</span>
<span class="sd">            Path to the MadMiner file.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">create_missing_folders</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">morpher</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Saving setup (including morphing) to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

            <span class="n">save_madminer_settings</span><span class="p">(</span>
                <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                <span class="n">parameters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span>
                <span class="n">benchmarks</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">,</span>
                <span class="n">morphing_components</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">morpher</span><span class="o">.</span><span class="n">components</span><span class="p">,</span>
                <span class="n">morphing_matrix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">morpher</span><span class="o">.</span><span class="n">morphing_matrix</span><span class="p">,</span>
                <span class="n">overwrite_existing_files</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Saving setup (without morphing) to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

            <span class="n">save_madminer_settings</span><span class="p">(</span>
                <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="n">benchmarks</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">,</span> <span class="n">overwrite_existing_files</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_generate_mg_process</span><span class="p">(</span>
        <span class="n">mg_directory</span><span class="p">,</span>
        <span class="n">temp_directory</span><span class="p">,</span>
        <span class="n">proc_card_file</span><span class="p">,</span>
        <span class="n">mg_process_directory</span><span class="p">,</span>
        <span class="n">ufo_model_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">log_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">initial_command</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls MadGraph to create the process folder. Instead of this low-level function, it is recommended to use `run`</span>
<span class="sd">        or `run_multiple`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mg_directory : str</span>
<span class="sd">            Path to the MadGraph 5 directory.</span>

<span class="sd">        temp_directory : str</span>
<span class="sd">            Path to a directory for temporary files.</span>

<span class="sd">        proc_card_file : str</span>
<span class="sd">            Path to the process card that tells MadGraph how to generate the process.</span>

<span class="sd">        mg_process_directory : str</span>
<span class="sd">            Path to the MG process directory.</span>

<span class="sd">        ufo_model_directory : str or None, optional</span>
<span class="sd">            Path to a UFO model that is not yet installed. It will be copied to the MG directory before the process card</span>
<span class="sd">            is executed. Default value: None.</span>

<span class="sd">        initial_command : str or None, optional</span>
<span class="sd">            Initial bash commands that have to be executed before MG is run (e.g. to load the correct virtual</span>
<span class="sd">            environment). Default value: None.</span>

<span class="sd">        log_file : str or None, optional</span>
<span class="sd">            Path to a log file in which the MadGraph output is saved. Default value: None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating MadGraph process folder from </span><span class="si">%s</span><span class="s2"> at </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">proc_card_file</span><span class="p">,</span> <span class="n">mg_process_directory</span><span class="p">)</span>

        <span class="n">create_missing_folders</span><span class="p">([</span><span class="n">temp_directory</span><span class="p">,</span> <span class="n">mg_process_directory</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">log_file</span><span class="p">)])</span>

        <span class="k">if</span> <span class="n">ufo_model_directory</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">copy_ufo_model</span><span class="p">(</span><span class="n">ufo_model_directory</span><span class="p">,</span> <span class="n">mg_directory</span><span class="p">)</span>

        <span class="n">generate_mg_process</span><span class="p">(</span>
            <span class="n">mg_directory</span><span class="p">,</span>
            <span class="n">temp_directory</span><span class="p">,</span>
            <span class="n">proc_card_file</span><span class="p">,</span>
            <span class="n">mg_process_directory</span><span class="p">,</span>
            <span class="n">initial_command</span><span class="o">=</span><span class="n">initial_command</span><span class="p">,</span>
            <span class="n">log_file</span><span class="o">=</span><span class="n">log_file</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_export_cards</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">param_card_template_file</span><span class="p">,</span>
        <span class="n">mg_process_directory</span><span class="p">,</span>
        <span class="n">sample_benchmark</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">param_card_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">reweight_card_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Writes out a param_card and reweight_card for MadGraph. Instead of this low-level function, it is recommended to</span>
<span class="sd">        use `run` or `run_multiple`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        param_card_template_file : str</span>
<span class="sd">            Path to a param_card.dat of the used model.</span>

<span class="sd">        mg_process_directory : str</span>
<span class="sd">            Path to the directory of the MG process.</span>

<span class="sd">        sample_benchmark : str or None, optional</span>
<span class="sd">            Name of the benchmark used for sampling. If None, the very first defined benchmark is used. Default value:</span>
<span class="sd">            None.</span>

<span class="sd">        param_card_filename : str or None, optional</span>
<span class="sd">            Output filename for the generated param card. If None, a default filename in the MG process folder is used.</span>
<span class="sd">            Default value: None.</span>

<span class="sd">        reweight_card_filename : str or None, optional</span>
<span class="sd">            str or None. Output filename for the generated reweight card. If None, a default filename in the MG process</span>
<span class="sd">            folder is used. Default value: None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">param_card_filename</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">reweight_card_filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating param and reweight cards in </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mg_process_directory</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Creating param and reweight cards in </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">param_card_filename</span><span class="p">,</span> <span class="n">reweight_card_filename</span><span class="p">)</span>

        <span class="c1"># Check status</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_benchmark</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

        <span class="c1"># Default benchmark</span>
        <span class="k">if</span> <span class="n">sample_benchmark</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sample_benchmark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_benchmark</span>

        <span class="c1"># Export param card</span>
        <span class="n">export_param_card</span><span class="p">(</span>
            <span class="n">benchmark</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">[</span><span class="n">sample_benchmark</span><span class="p">],</span>
            <span class="n">parameters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span>
            <span class="n">param_card_template_file</span><span class="o">=</span><span class="n">param_card_template_file</span><span class="p">,</span>
            <span class="n">mg_process_directory</span><span class="o">=</span><span class="n">mg_process_directory</span><span class="p">,</span>
            <span class="n">param_card_filename</span><span class="o">=</span><span class="n">param_card_filename</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Export reweight card</span>
        <span class="n">export_reweight_card</span><span class="p">(</span>
            <span class="n">sample_benchmark</span><span class="o">=</span><span class="n">sample_benchmark</span><span class="p">,</span>
            <span class="n">benchmarks</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span>
            <span class="n">mg_process_directory</span><span class="o">=</span><span class="n">mg_process_directory</span><span class="p">,</span>
            <span class="n">reweight_card_filename</span><span class="o">=</span><span class="n">reweight_card_filename</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_run_mg_and_pythia</span><span class="p">(</span>
        <span class="n">mg_directory</span><span class="p">,</span>
        <span class="n">mg_process_directory</span><span class="p">,</span>
        <span class="n">proc_card_filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">run_card_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">param_card_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">reweight_card_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pythia8_card_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">is_background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">initial_command</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">log_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calls MadGraph to generate events. Instead of this low-level function, it is recommended to use `run` or</span>
<span class="sd">        `run_multiple`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mg_directory : str</span>
<span class="sd">            Path to the MadGraph 5 base directory.</span>

<span class="sd">        mg_process_directory : str</span>
<span class="sd">            Path to the MG process directory.</span>

<span class="sd">        proc_card_filename : str or None, optional</span>
<span class="sd">            Filename for the MG command card that will be generated. If None, a default filename in the MG process</span>
<span class="sd">            directory will be chosen.</span>

<span class="sd">        run_card_file : str or None, optional</span>
<span class="sd">            Path to the MadGraph run card. If None, the card present in the process folder is used. Default value:</span>
<span class="sd">            None)</span>

<span class="sd">        param_card_file : str or None, optional</span>
<span class="sd">            Path to the MadGraph run card. If None, the card present in the process folder is used. Default value:</span>
<span class="sd">            None)</span>

<span class="sd">        reweight_card_file : str or None, optional</span>
<span class="sd">            Path to the MadGraph reweight card. If None, the card present in the process folder is used. (Default value</span>
<span class="sd">            = None)</span>

<span class="sd">        pythia8_card_file : str or None, optional</span>
<span class="sd">            Path to the MadGraph Pythia8 card. If None, Pythia is not run. Default value: None.</span>

<span class="sd">        is_background : bool, optional</span>
<span class="sd">            Should be True for background processes, i.e. process in which the differential cross section does not</span>
<span class="sd">            depend on the parameters (and would be the same for all benchmarks). In this case, no reweighting is run,</span>
<span class="sd">            which can substantially speed up the event generation. Default value: False.</span>

<span class="sd">        initial_command : str or None, optional</span>
<span class="sd">            Initial shell commands that have to be executed before MG is run (e.g. to load a virtual environment).</span>
<span class="sd">            Default value: None.</span>

<span class="sd">        log_file : str or None, optional</span>
<span class="sd">            Path to a log file in which the MadGraph output is saved. Default value: None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Preparations</span>
        <span class="n">create_missing_folders</span><span class="p">([</span><span class="n">mg_process_directory</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">log_file</span><span class="p">)])</span>
        <span class="k">if</span> <span class="n">proc_card_filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">create_missing_folders</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">proc_card_filename</span><span class="p">)])</span>

        <span class="c1"># Just run it already</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Starting MadGraph and Pythia in </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mg_process_directory</span><span class="p">)</span>

        <span class="n">run_mg_pythia</span><span class="p">(</span>
            <span class="n">mg_directory</span><span class="p">,</span>
            <span class="n">mg_process_directory</span><span class="p">,</span>
            <span class="n">proc_card_filename</span><span class="p">,</span>
            <span class="n">run_card_file</span><span class="p">,</span>
            <span class="n">param_card_file</span><span class="p">,</span>
            <span class="n">reweight_card_file</span><span class="p">,</span>
            <span class="n">pythia8_card_file</span><span class="p">,</span>
            <span class="n">is_background</span><span class="o">=</span><span class="n">is_background</span><span class="p">,</span>
            <span class="n">initial_command</span><span class="o">=</span><span class="n">initial_command</span><span class="p">,</span>
            <span class="n">log_file</span><span class="o">=</span><span class="n">log_file</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_prepare_mg_and_pythia</span><span class="p">(</span>
        <span class="n">mg_process_directory</span><span class="p">,</span>
        <span class="n">proc_card_filename_from_mgprocdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">run_card_file_from_mgprocdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">param_card_file_from_mgprocdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">reweight_card_file_from_mgprocdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pythia8_card_file_from_mgprocdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">is_background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">script_file_from_mgprocdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">initial_command</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">log_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">log_file_from_logdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepares a bash script that will start the event generation. Instead of this low-level function, it is</span>
<span class="sd">        recommended to use `run` or `run_multiple`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mg_process_directory : str</span>
<span class="sd">            Path to the MG process directory.</span>

<span class="sd">        proc_card_filename_from_mgprocdir : str or None, optional</span>
<span class="sd">            Filename for the MG command card that will be generated, relative from mg_process_directory. If None, a</span>
<span class="sd">            default filename in the MG process directory will be chosen.</span>

<span class="sd">        param_card_file_from_mgprocdir : str or None, optional</span>
<span class="sd">            Path to the MadGraph run card, relative from mg_process_directory. If None, the card present in the process</span>
<span class="sd">            folder is used. Default value: None.</span>

<span class="sd">        param_card_file_from_mgprocdir : str or None, optional</span>
<span class="sd">            Path to the MadGraph run card, relative from mg_process_directory. If None, the card present in the process</span>
<span class="sd">            folder is used. Default value: None.</span>

<span class="sd">        reweight_card_file_from_mgprocdir : str or None, optional</span>
<span class="sd">            Path to the MadGraph reweight card, relative from mg_process_directory. If None, the card present in the</span>
<span class="sd">            process folder is used. Default value: None.</span>

<span class="sd">        pythia8_card_file_from_mgprocdir : str or None, optional</span>
<span class="sd">            Path to the MadGraph Pythia8 card, relative from mg_process_directory. If None, Pythia is not run. Default</span>
<span class="sd">            value: None.</span>

<span class="sd">        is_background : bool, optional</span>
<span class="sd">            Should be True for background processes, i.e. process in which the differential cross section does not</span>
<span class="sd">            depend on the parameters (and would be the same for all benchmarks). In this case, no reweighting is run,</span>
<span class="sd">            which can substantially speed up the event generation. Default value: False.</span>

<span class="sd">        script_file_from_mgprocdir : str or None, optional</span>
<span class="sd">            This sets where the shell script to run MG and Pythia is generated, relative from mg_process_directory. If</span>
<span class="sd">            None, a default filename in `mg_process_directory/madminer` is used. Default value: None.</span>

<span class="sd">        initial_command : str or None, optional</span>
<span class="sd">            Initial shell commands that have to be executed before MG is run (e.g. to load a virtual environment).</span>
<span class="sd">            Default value: None.</span>

<span class="sd">        log_file_from_logdir : str or None, optional</span>
<span class="sd">            Path to a log file in which the MadGraph output is saved, relative from the default log directory. Default</span>
<span class="sd">            value: None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bash_script_call : str</span>
<span class="sd">            How to call this script.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Preparations</span>
        <span class="n">create_missing_folders</span><span class="p">([</span><span class="n">mg_process_directory</span><span class="p">,</span> <span class="n">log_dir</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">proc_card_filename_from_mgprocdir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">create_missing_folders</span><span class="p">([</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">proc_card_filename_from_mgprocdir</span><span class="p">)])</span>

        <span class="c1"># Prepare run...</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Preparing script to run MadGraph and Pythia in </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">mg_process_directory</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">prepare_run_mg_pythia</span><span class="p">(</span>
            <span class="n">mg_process_directory</span><span class="p">,</span>
            <span class="n">proc_card_filename_from_mgprocdir</span><span class="o">=</span><span class="n">proc_card_filename_from_mgprocdir</span><span class="p">,</span>
            <span class="n">run_card_file_from_mgprocdir</span><span class="o">=</span><span class="n">run_card_file_from_mgprocdir</span><span class="p">,</span>
            <span class="n">param_card_file_from_mgprocdir</span><span class="o">=</span><span class="n">param_card_file_from_mgprocdir</span><span class="p">,</span>
            <span class="n">reweight_card_file_from_mgprocdir</span><span class="o">=</span><span class="n">reweight_card_file_from_mgprocdir</span><span class="p">,</span>
            <span class="n">pythia8_card_file_from_mgprocdir</span><span class="o">=</span><span class="n">pythia8_card_file_from_mgprocdir</span><span class="p">,</span>
            <span class="n">is_background</span><span class="o">=</span><span class="n">is_background</span><span class="p">,</span>
            <span class="n">script_file_from_mgprocdir</span><span class="o">=</span><span class="n">script_file_from_mgprocdir</span><span class="p">,</span>
            <span class="n">initial_command</span><span class="o">=</span><span class="n">initial_command</span><span class="p">,</span>
            <span class="n">log_file_from_logdir</span><span class="o">=</span><span class="n">log_file_from_logdir</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="MadMiner.run"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">mg_directory</span><span class="p">,</span>
        <span class="n">proc_card_file</span><span class="p">,</span>
        <span class="n">param_card_template_file</span><span class="p">,</span>
        <span class="n">run_card_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">mg_process_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pythia8_card_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">sample_benchmark</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">is_background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">only_prepare_script</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">ufo_model_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">log_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">temp_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">initial_command</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        High-level function that creates the the MadGraph process, all required cards, and prepares or runs the event</span>
<span class="sd">        generation for one combination of cards.</span>

<span class="sd">        If `only_prepare_scripts=True`, the event generation is not run</span>
<span class="sd">        directly, but a bash script is created in `&lt;process_folder&gt;/madminer/run.sh` that will start the event</span>
<span class="sd">        generation with the correct settings.</span>

<span class="sd">        High-level function that creates the the MadGraph process, all required cards, and prepares or runs the event</span>
<span class="sd">        generation for multiple combinations of run_cards or importance samplings (`sample_benchmarks`).</span>

<span class="sd">        If `only_prepare_scripts=True`, the event generation is not run</span>
<span class="sd">        directly, but a bash script is created in `&lt;process_folder&gt;/madminer/run.sh` that will start the event</span>
<span class="sd">        generation with the correct settings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mg_directory : str</span>
<span class="sd">            Path to the MadGraph 5 base directory.</span>

<span class="sd">        proc_card_file : str</span>
<span class="sd">            Path to the process card that tells MadGraph how to generate the process.</span>

<span class="sd">        param_card_template_file : str</span>
<span class="sd">            Path to a param card that will be used as template to create the</span>
<span class="sd">            appropriate param cards for these runs.</span>

<span class="sd">        run_card_file : str</span>
<span class="sd">            Paths to the MadGraph run card. If None, the default run_card is used.</span>

<span class="sd">        mg_process_directory : str or None, optional</span>
<span class="sd">            Path to the MG process directory. If None, MadMiner uses ./MG_process. Default value: None.</span>

<span class="sd">        pythia8_card_file : str or None, optional</span>
<span class="sd">            Path to the MadGraph Pythia8 card. If None, the card present in the process folder is used.</span>
<span class="sd">            Default value: None.</span>

<span class="sd">        sample_benchmark : list of str or None, optional</span>
<span class="sd">            Lists the names of benchmarks that should be used to sample events. A different sampling does not change</span>
<span class="sd">            the expected differential cross sections, but will change which regions of phase space have many events</span>
<span class="sd">            (small variance) or few events (high variance). If None, the benchmark added first is used. Default value:</span>
<span class="sd">            None.</span>

<span class="sd">        is_background : bool, optional</span>
<span class="sd">            Should be True for background processes, i.e. process in which the differential cross section does not</span>
<span class="sd">            depend on the parameters (i.e. is the same for all benchmarks). In this case, no reweighting is run, which</span>
<span class="sd">            can substantially speed up the event generation. Default value: False.</span>

<span class="sd">        only_prepare_script : bool, optional</span>
<span class="sd">            If True, the event generation is not started, but instead a run.sh script is created in the process</span>
<span class="sd">            directory. Default value: False.</span>

<span class="sd">        only_prepare_script : bool, optional</span>
<span class="sd">            If True, MadGraph is not executed, but instead a run.sh script is created in</span>
<span class="sd">            the process directory. Default value: False.</span>

<span class="sd">        ufo_model_directory : str or None, optional</span>
<span class="sd">            Path to an UFO model directory that should be used, but is not yet installed in mg_directory/models. The</span>
<span class="sd">            model will be copied to the MadGraph model directory before the process directory is generated. (Default</span>
<span class="sd">            value = None.</span>

<span class="sd">        log_directory : str or None, optional</span>
<span class="sd">            Directory for log files with the MadGraph output. If None, ./logs is used. Default value: None.</span>

<span class="sd">        temp_directory : str or None, optional</span>
<span class="sd">            Path to a temporary directory. If None, a system default is used. Default value: None.</span>

<span class="sd">        initial_command : str or None, optional</span>
<span class="sd">            Initial shell commands that have to be executed before MG is run (e.g. to load a virtual environment).</span>
<span class="sd">            Default value: None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">sample_benchmark</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sample_benchmark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_benchmark</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">run_multiple</span><span class="p">(</span>
            <span class="n">mg_directory</span><span class="o">=</span><span class="n">mg_directory</span><span class="p">,</span>
            <span class="n">proc_card_file</span><span class="o">=</span><span class="n">proc_card_file</span><span class="p">,</span>
            <span class="n">param_card_template_file</span><span class="o">=</span><span class="n">param_card_template_file</span><span class="p">,</span>
            <span class="n">run_card_files</span><span class="o">=</span><span class="p">[</span><span class="n">run_card_file</span><span class="p">],</span>
            <span class="n">mg_process_directory</span><span class="o">=</span><span class="n">mg_process_directory</span><span class="p">,</span>
            <span class="n">pythia8_card_file</span><span class="o">=</span><span class="n">pythia8_card_file</span><span class="p">,</span>
            <span class="n">sample_benchmarks</span><span class="o">=</span><span class="p">[</span><span class="n">sample_benchmark</span><span class="p">],</span>
            <span class="n">is_background</span><span class="o">=</span><span class="n">is_background</span><span class="p">,</span>
            <span class="n">only_prepare_script</span><span class="o">=</span><span class="n">only_prepare_script</span><span class="p">,</span>
            <span class="n">ufo_model_directory</span><span class="o">=</span><span class="n">ufo_model_directory</span><span class="p">,</span>
            <span class="n">log_directory</span><span class="o">=</span><span class="n">log_directory</span><span class="p">,</span>
            <span class="n">temp_directory</span><span class="o">=</span><span class="n">temp_directory</span><span class="p">,</span>
            <span class="n">initial_command</span><span class="o">=</span><span class="n">initial_command</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="MadMiner.run_multiple"><a class="viewcode-back" href="../../madminer.core.html#madminer.core.MadMiner.run_multiple">[docs]</a>    <span class="k">def</span> <span class="nf">run_multiple</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">mg_directory</span><span class="p">,</span>
        <span class="n">proc_card_file</span><span class="p">,</span>
        <span class="n">param_card_template_file</span><span class="p">,</span>
        <span class="n">run_card_files</span><span class="p">,</span>
        <span class="n">mg_process_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pythia8_card_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">sample_benchmarks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">is_background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">only_prepare_script</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">ufo_model_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">log_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">temp_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">initial_command</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        High-level function that creates the the MadGraph process, all required cards, and prepares or runs the event</span>
<span class="sd">        generation for multiple combinations of run_cards or importance samplings (`sample_benchmarks`).</span>

<span class="sd">        If `only_prepare_scripts=True`, the event generation is not run</span>
<span class="sd">        directly, but a bash script is created in `&lt;process_folder&gt;/madminer/run.sh` that will start the event</span>
<span class="sd">        generation with the correct settings.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        mg_directory : str</span>
<span class="sd">            Path to the MadGraph 5 base directory.</span>

<span class="sd">        proc_card_file : str</span>
<span class="sd">            Path to the process card that tells MadGraph how to generate the process.</span>

<span class="sd">        param_card_template_file : str</span>
<span class="sd">            Path to a param card that will be used as template to create the appropriate param cards for these runs.</span>

<span class="sd">        run_card_files : list of str</span>
<span class="sd">            Paths to the MadGraph run card.</span>

<span class="sd">        mg_process_directory : str or None, optional</span>
<span class="sd">            Path to the MG process directory. If None, MadMiner uses ./MG_process. Default value: None.</span>

<span class="sd">        pythia8_card_file : str, optional</span>
<span class="sd">            Path to the MadGraph Pythia8 card. If None, the card present in the process folder</span>
<span class="sd">            is used. Default value: None.</span>

<span class="sd">        sample_benchmarks : list of str or None, optional</span>
<span class="sd">            Lists the names of benchmarks that should be used to sample events. A different sampling does not change</span>
<span class="sd">            the expected differential cross sections, but will change which regions of phase space have many events</span>
<span class="sd">            (small variance) or few events (high variance). If None, a run is started for each of the benchmarks, which</span>
<span class="sd">            should map out all regions of phase space well. Default value: None.</span>

<span class="sd">        is_background : bool, optional</span>
<span class="sd">            Should be True for background processes, i.e. process in which the differential cross section does not</span>
<span class="sd">            depend on the parameters (i.e. is the same for all benchmarks). In this case, no reweighting is run, which</span>
<span class="sd">            can substantially speed up the event generation. Default value: False.</span>

<span class="sd">        only_prepare_script : bool, optional</span>
<span class="sd">            If True, the event generation is not started, but instead a run.sh script is created in the process</span>
<span class="sd">            directory. Default value: False.</span>

<span class="sd">        only_prepare_script : bool, optional</span>
<span class="sd">            If True, MadGraph is not executed, but instead a run.sh script is created in</span>
<span class="sd">            the process directory. Default value: False.</span>

<span class="sd">        ufo_model_directory : str or None, optional</span>
<span class="sd">            Path to an UFO model directory that should be used, but is not yet installed in mg_directory/models. The</span>
<span class="sd">            model will be copied to the MadGraph model directory before the process directory is generated. (Default</span>
<span class="sd">            value = None)</span>

<span class="sd">        log_directory : str or None, optional</span>
<span class="sd">            Directory for log files with the MadGraph output. If None, ./logs is used. Default value: None.</span>

<span class="sd">        temp_directory : str or None, optional</span>
<span class="sd">            Path to a temporary directory. If None, a system default is used. Default value: None.</span>

<span class="sd">        initial_command : str or None, optional</span>
<span class="sd">            Initial shell commands that have to be executed before MG is run (e.g. to load a virtual environment).</span>
<span class="sd">            Default value: None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Defaults</span>
        <span class="k">if</span> <span class="n">mg_process_directory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mg_process_directory</span> <span class="o">=</span> <span class="s2">&quot;./MG_process&quot;</span>

        <span class="k">if</span> <span class="n">temp_directory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">temp_directory</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">log_directory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">log_directory</span> <span class="o">=</span> <span class="s2">&quot;./logs&quot;</span>

        <span class="k">if</span> <span class="n">sample_benchmarks</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sample_benchmarks</span> <span class="o">=</span> <span class="p">[</span><span class="n">benchmark</span> <span class="k">for</span> <span class="n">benchmark</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">]</span>

        <span class="c1"># Generate process folder</span>
        <span class="n">log_file_generate</span> <span class="o">=</span> <span class="n">log_directory</span> <span class="o">+</span> <span class="s2">&quot;/generate.log&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_mg_process</span><span class="p">(</span>
            <span class="n">mg_directory</span><span class="p">,</span>
            <span class="n">temp_directory</span><span class="p">,</span>
            <span class="n">proc_card_file</span><span class="p">,</span>
            <span class="n">mg_process_directory</span><span class="p">,</span>
            <span class="n">ufo_model_directory</span><span class="o">=</span><span class="n">ufo_model_directory</span><span class="p">,</span>
            <span class="n">initial_command</span><span class="o">=</span><span class="n">initial_command</span><span class="p">,</span>
            <span class="n">log_file</span><span class="o">=</span><span class="n">log_file_generate</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Make MadMiner folders</span>
        <span class="n">create_missing_folders</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/madminer&quot;</span><span class="p">,</span>
                <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/madminer/cards&quot;</span><span class="p">,</span>
                <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/madminer/scripts&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># Loop over settings</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">run_card_file</span> <span class="ow">in</span> <span class="n">run_card_files</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">sample_benchmark</span> <span class="ow">in</span> <span class="n">sample_benchmarks</span><span class="p">:</span>

                <span class="c1"># Files</span>
                <span class="n">script_file</span> <span class="o">=</span> <span class="s2">&quot;madminer/scripts/run_</span><span class="si">{}</span><span class="s2">.sh&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">log_file_run</span> <span class="o">=</span> <span class="s2">&quot;run_</span><span class="si">{}</span><span class="s2">.log&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">mg_commands_filename</span> <span class="o">=</span> <span class="s2">&quot;/madminer/cards/mg_commands_</span><span class="si">{}</span><span class="s2">.dat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">param_card_file</span> <span class="o">=</span> <span class="s2">&quot;/madminer/cards/param_card_</span><span class="si">{}</span><span class="s2">.dat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">reweight_card_file</span> <span class="o">=</span> <span class="s2">&quot;/madminer/cards/reweight_card_</span><span class="si">{}</span><span class="s2">.dat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">new_pythia8_card_file</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">pythia8_card_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">new_pythia8_card_file</span> <span class="o">=</span> <span class="s2">&quot;/madminer/cards/pythia8_card_</span><span class="si">{}</span><span class="s2">.dat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">new_run_card_file</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">run_card_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">new_run_card_file</span> <span class="o">=</span> <span class="s2">&quot;/madminer/cards/run_card_</span><span class="si">{}</span><span class="s2">.dat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Run </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  Sampling from benchmark: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">sample_benchmark</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  Original run card:       </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">run_card_file</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  Original Pythia8 card:   </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">pythia8_card_file</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  Copied run card:         </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">new_run_card_file</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  Copied Pythia8 card:     </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">new_pythia8_card_file</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  Param card:              </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">param_card_file</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  Reweight card:           </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">reweight_card_file</span><span class="p">)</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  Log file:                </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">log_file_run</span><span class="p">)</span>

                <span class="c1"># Creat param and reweight cards</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_export_cards</span><span class="p">(</span>
                    <span class="n">param_card_template_file</span><span class="p">,</span>
                    <span class="n">mg_process_directory</span><span class="p">,</span>
                    <span class="n">sample_benchmark</span><span class="o">=</span><span class="n">sample_benchmark</span><span class="p">,</span>
                    <span class="n">param_card_filename</span><span class="o">=</span><span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">param_card_file</span><span class="p">,</span>
                    <span class="n">reweight_card_filename</span><span class="o">=</span><span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">reweight_card_file</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="c1"># Copy run and Pythia cards</span>
                <span class="k">if</span> <span class="n">run_card_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">copy_file</span><span class="p">(</span><span class="n">run_card_file</span><span class="p">,</span> <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">new_run_card_file</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">pythia8_card_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">copy_file</span><span class="p">(</span><span class="n">pythia8_card_file</span><span class="p">,</span> <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">new_pythia8_card_file</span><span class="p">)</span>

                <span class="c1"># Run MG and Pythia</span>
                <span class="k">if</span> <span class="n">only_prepare_script</span><span class="p">:</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_mg_and_pythia</span><span class="p">(</span>
                        <span class="n">mg_process_directory</span><span class="p">,</span>
                        <span class="n">proc_card_filename_from_mgprocdir</span><span class="o">=</span><span class="n">mg_commands_filename</span><span class="p">,</span>
                        <span class="n">run_card_file_from_mgprocdir</span><span class="o">=</span><span class="n">new_run_card_file</span><span class="p">,</span>
                        <span class="n">param_card_file_from_mgprocdir</span><span class="o">=</span><span class="n">param_card_file</span><span class="p">,</span>
                        <span class="n">reweight_card_file_from_mgprocdir</span><span class="o">=</span><span class="n">reweight_card_file</span><span class="p">,</span>
                        <span class="n">pythia8_card_file_from_mgprocdir</span><span class="o">=</span><span class="n">new_pythia8_card_file</span><span class="p">,</span>
                        <span class="n">is_background</span><span class="o">=</span><span class="n">is_background</span><span class="p">,</span>
                        <span class="n">script_file_from_mgprocdir</span><span class="o">=</span><span class="n">script_file</span><span class="p">,</span>
                        <span class="n">initial_command</span><span class="o">=</span><span class="n">initial_command</span><span class="p">,</span>
                        <span class="n">log_dir</span><span class="o">=</span><span class="n">log_directory</span><span class="p">,</span>
                        <span class="n">log_file_from_logdir</span><span class="o">=</span><span class="n">log_file_run</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_run_mg_and_pythia</span><span class="p">(</span>
                        <span class="n">mg_directory</span><span class="p">,</span>
                        <span class="n">mg_process_directory</span><span class="p">,</span>
                        <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">mg_commands_filename</span><span class="p">,</span>
                        <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">new_run_card_file</span><span class="p">,</span>
                        <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">param_card_file</span><span class="p">,</span>
                        <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">reweight_card_file</span><span class="p">,</span>
                        <span class="kc">None</span> <span class="k">if</span> <span class="n">new_pythia8_card_file</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">new_pythia8_card_file</span><span class="p">,</span>
                        <span class="c1"># mg_process_directory + &quot;/&quot; + new_pythia8_card_file,</span>
                        <span class="n">is_background</span><span class="o">=</span><span class="n">is_background</span><span class="p">,</span>
                        <span class="n">initial_command</span><span class="o">=</span><span class="n">initial_command</span><span class="p">,</span>
                        <span class="n">log_file</span><span class="o">=</span><span class="n">log_directory</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">log_file_run</span><span class="p">,</span>
                    <span class="p">)</span>

                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Master shell script</span>
        <span class="k">if</span> <span class="n">only_prepare_script</span><span class="p">:</span>
            <span class="n">master_script_filename</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/madminer/run.sh&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mg_process_directory</span><span class="p">)</span>

            <span class="n">placeholder_definition</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;mgdir=${1:-&quot;</span> <span class="o">+</span> <span class="n">mg_directory</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;}&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">placeholder_definition</span> <span class="o">+=</span> <span class="sa">r</span><span class="s2">&quot;mgprocdir=${2:-&quot;</span> <span class="o">+</span> <span class="n">mg_process_directory</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;}&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">placeholder_definition</span> <span class="o">+=</span> <span class="sa">r</span><span class="s2">&quot;mmlogdir=${3:-&quot;</span> <span class="o">+</span> <span class="n">log_directory</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;}&quot;</span>

            <span class="n">commands</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
            <span class="n">script</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;#!/bin/bash</span><span class="se">\n\n</span><span class="s2"># Master script to generate events for MadMiner</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;# Usage: run.sh [MG_directory] [MG_process_directory] [log_directory]</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                <span class="o">+</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="se">\n\n</span><span class="si">{}</span><span class="s2">&quot;</span>
            <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">placeholder_definition</span><span class="p">,</span> <span class="n">commands</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">master_script_filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>

            <span class="n">make_file_executable</span><span class="p">(</span><span class="n">master_script_filename</span><span class="p">)</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;To generate events, please run:</span><span class="se">\n\n</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> [MG_directory] [MG_process_directory] [log_dir]</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">master_script_filename</span><span class="p">,</span>
            <span class="p">)</span></div></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">MadMiner</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../madminer.core.html">madminer.core module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../madminer.delphes.html">madminer.delphes module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../madminer.fisherinformation.html">madminer.fisherinformation module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../madminer.ml.html">madminer.ml module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../madminer.morphing.html">madminer.morphing module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../madminer.plotting.html">madminer.plotting module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../madminer.sampling.html">madminer.sampling module</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;Johann Brehmer, Felix Kling, and Kyle Cranmer 2018.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>